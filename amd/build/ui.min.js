define("tiny_embedmediasite/ui",["exports","./modal","core/templates","core/notification","./repository"],(function(_exports,_modal,_templates,_notification,_repository){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * TODO describe module ui
   *
   * @module     tiny_embedmediasite/ui
   * @copyright  2026 Andrew Rowatt <A.J.Rowatt@massey.ac.nz>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.handleAction=void 0,_modal=_interopRequireDefault(_modal),_templates=_interopRequireDefault(_templates);_exports.handleAction=async editor=>{displayDialogue(editor)};const displayDialogue=async editor=>{const data=Object.assign({},{}),modal=await _modal.default.create({templateContext:await getTemplateContext(editor,data),large:!0,removeOnClose:!0});await modal.show();const loadingIndicator=document.getElementById("tiny_embedmediasite_loading");let page=1;const observer=new IntersectionObserver((entries=>{var pageNumber;window.console.log("IntersectionObserver",entries[0]),entries[0].isIntersecting&&(observer.unobserve(loadingIndicator),page++,pageNumber=page,(0,_repository.getMyMediasitePresentations)(pageNumber).then((newPresentations=>(_templates.default.renderForPromise("tiny_embedmediasite/_presentations",{presentations:newPresentations}).then((_ref=>{let{html:html,js:js}=_ref;return _templates.default.appendNodeContents("#tiny_embedmediasite_content-container",html,js),newPresentations})).catch((error=>(0,_notification.exception)(error))),newPresentations))).catch((error=>{window.console.error("Error loading more content:",error)})),setTimeout((()=>{observer.observe(loadingIndicator)}),500))}),{root:null,threshold:1,rootMargin:"0px"});observer.observe(loadingIndicator)},getTemplateContext=async(editor,data)=>Object.assign({},{presentations:await(0,_repository.getMyMediasitePresentations)(1)},data)}));

//# sourceMappingURL=ui.min.js.map