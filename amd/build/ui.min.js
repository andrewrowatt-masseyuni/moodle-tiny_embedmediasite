define("tiny_embedmediasite/ui",["exports","./modal","core/templates","core/notification","./repository"],(function(_exports,_modal,_templates,_notification,_repository){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * TODO describe module ui
   *
   * @module     tiny_embedmediasite/ui
   * @copyright  2026 Andrew Rowatt <A.J.Rowatt@massey.ac.nz>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.handleAction=void 0,_modal=_interopRequireDefault(_modal),_templates=_interopRequireDefault(_templates);_exports.handleAction=async editor=>{displayDialogue(editor)};const displayDialogue=async editor=>{let page=1,presentations=await(0,_repository.getMyMediasitePresentations)(page).catch((error=>(0,_notification.exception)(error)));const modal=await _modal.default.create({templateContext:{presentations:presentations},large:!0,removeOnClose:!0});await modal.show();const loadingIndicator=document.getElementById("tiny_embedmediasite_loading"),noMoreContentIndicator=document.getElementById("tiny_embedmediasite_no_more_content");const observer=new IntersectionObserver((async entries=>{entries[0].isIntersecting&&(observer.unobserve(loadingIndicator),page++,await async function(pageNumber){const presentations=await(0,_repository.getMyMediasitePresentations)(pageNumber).catch((error=>(0,_notification.exception)(error)));if(null==presentations||!presentations.length)return window.console.log("No more presentations to load."),0;const{html:html,js:js}=await _templates.default.renderForPromise("tiny_embedmediasite/_presentations",{presentations:presentations});return _templates.default.appendNodeContents("#tiny_embedmediasite_content-container",html,js),presentations.length}(page)?(window.console.log("More presentations to load."),observer.observe(loadingIndicator)):(loadingIndicator.style.display="none",noMoreContentIndicator.style.display="block"))}),{root:null,threshold:1,rootMargin:"0px"});observer.observe(loadingIndicator)}}));

//# sourceMappingURL=ui.min.js.map