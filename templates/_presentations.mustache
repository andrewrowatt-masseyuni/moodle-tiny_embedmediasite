{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template tiny_embedmediasite/_presentations

    Displays a list of MediaSite presentations with thumbnails, metadata, and action buttons.

    Example context (json):
    {
        "list": [
            {
                "title": "Introduction to Course Content",
                "date_formatted": "January 10, 2026",
                "duration_formatted": "45 minutes",
                "source": "https://mediasite.example.com/Mediasite/Play/abc123def456",
                "thumbnail": "https://mediasite.example.com/mediasite/api/presentations/abc123def456/thumbnail"
            },
            {
                "title": "Advanced Topics Overview",
                "date_formatted": "January 8, 2026",
                "duration_formatted": "60 minutes",
                "source": "https://mediasite.example.com/Mediasite/Play/xyz789uvw321",
                "thumbnail": "https://mediasite.example.com/mediasite/api/presentations/xyz789uvw321/thumbnail"
            }
        ],
        "manage": "https:\/\/webcast.massey.ac.nz\/mediasite\/mymediasite",
        "nologin": true,
        "norefresh": true,
        "nosearch": true,
        "page": 1,
        "pages": -1
    }
}}
{{#list}}
<div class="presentation" data-source="{{source}}" data-title="{{title}}">
    <div class="presentation_details">
        <div class="title">{{title}}</div>
        {{#description}}<div class="metadata">
            <div class="description" title="{{#str}} description {{/str}}"><span>{{#str}} description {{/str}}</span><p>{{description}}</p></div>
        </div>{{/description}}
        <div class="metadata">
            <div class="date" title="{{#str}} timecreated {{/str}}"><span>{{#str}} timecreated {{/str}}</span><small>{{date_formatted}}</small></div><div class="date" title="{{#str}} duration, tiny_embedmediasite {{/str}}"><span>{{#str}} duration, tiny_embedmediasite {{/str}}</span><small>{{duration_formatted}}</small></div>
        </div>
        <div class="actions">
            <div class="btn-group">
                <button type="button" class="btn btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    {{#str}} insertmediasitelink, tiny_embedmediasite {{/str}}
                </button>
                <div class="dropdown-menu small">
                    <a class="dropdown-item tiny-embedmediasite-insert-button" href="#" data-mode="embed">{{#str}} embedvideo, tiny_embedmediasite {{/str}}</a>
                    <a class="dropdown-item tiny-embedmediasite-insert-button" href="#" data-mode="linkonly">{{#str}} insertlinkonly, tiny_embedmediasite {{/str}}</a>
                    <div class="dropdown-divider"></div>
                    <div class="dropdown-item form-group mb-0{{^description}} disabled{{/description}}">
                        <div class="form-check">
                        <label class="form-check-label"><input type="checkbox" class="form-check-input" name="groups" value="cohortgroup-{{id}}" {{#description}}checked="checked"{{/description}} data-source="{{source}}">{{#str}} includedescription, tiny_embedmediasite {{/str}}</span>
                        </label>
                    </div>   
                    </div>
                </div>
            </div>
            <a class="ml-2 btn btn-secondary btn-sm tiny-embedmediasite-view" href="{{source}}" target="_blank"><i class="fa-solid fa-arrow-up-right-from-square"></i> {{#str}} view {{/str}}</a>
        </div>
    </div>
    <div class="presentation_thumbnail">{{#thumbnail}}<img alt="{{#str}} thumbnailof, tiny_embedmediasite {{/str}} {{title}}" src="{{thumbnail}}">{{/thumbnail}}</div>
</div>
{{/list}}